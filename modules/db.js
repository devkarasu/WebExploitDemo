var mongoose = require('mongoose');

var url = process.env.NODE_MLAB_URL;
var port = process.env.NODE_MLAB_PORT;
var user = process.env.NODE_MLAB_USER;
var pass = process.env.NODE_MLAB_PASS;

var dbconnectionstring = 'mongodb://' + user + ':' + pass + '@' + url + ':' + port + '/web-exploit-demo';

var schema = mongoose.Schema;

var postSchema = new schema({
    user: String,
    title: String,
    data: String
});

var userSchema = new schema({
  name: String,
  password: String,
  bio: String
})

var postData = mongoose.model('posts', postSchema);
var userData = mongoose.model('users', userSchema);

var data = {
    post: postData,
    user: userData
};

mongoose.connect(dbconnectionstring, (err) => {
	if (err) {
		console.error(err);
		return;
	}

	console.info('DB Connection Success!!');
});

module.exports = data;
